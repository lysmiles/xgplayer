# 起步
安装西瓜视频
```
 npm i xgplayer
```
安装Hls插件
```
 npm i xgplayer-hls.js
```
安装Mp4插件
```
npm i xgplayer-mp4
```
如果需要自定义样式，安装以下`loader`（自定义样式功能暂未开放）
```
npm i node-sass sass-loader raw-loader
```
# 功能详细及注意事项
### 分屏
1. 通过url对比，重复的视频不会播放，不会占用分屏板块。
2. 当前分屏数全部播放视频后，后续再添加视频，只替换最后一块屏
3. 当分屏较多时，切到较少分屏时，超出较少分屏数的视频会被销毁
4. 当切换视频时，原理为重新拉流，并非将该视频实例销毁了重建

### 关闭视频
1. 点击视频中的**`×`**可清除当前视频信息，但视频实例未销毁
2. 清除视频之后，再新增视频将会从头到尾依次增加，中间有未清除的视频会自动跳过

### 清晰度
1. 传入清晰度数组时，至少有一个清晰度的`url`要和视频源`url`严格相等，
   否则会导致清晰度等级字样`标清`,`高清`,`超清`等，无法在控制栏显示

# API
## 参数
### 分屏数
- 配置项：`split-screen`
- 类型: Number
- 默认值：1
- 参考值：1 | 4 | 9 | 16
- 描述：传入参考值以外的值控制台会报错，值默认回到1。

### 视频源
- 配置项：`video-url`
- 类型: String
- 默认值：''
- 参考值：
- 描述：单个视频源。不支持分屏功能。该参数不能与`video-list`混用，否则可能会有意料之外的错误。

### 视频数据
- 配置项：`video-list`
- 类型: Array< Object >
- 默认值：[]
- 参考数据结构：
```
[
    {
        url: '', // 摄像头视频或直播流url
        definitionList: [ //  清晰度数据
           {
              name: '标清', // 渲染为清晰度切换播放栏选项
              url: ''
           }，
           {
              name: '高清',
              url: ''
           }，
           {
              name: '超清',
              url: ''
           }
        ],
        poster: '' // 封面图
    }
]
```
- 描述：多个视频源。支持分屏功能。对象可以包含多个别的键值对，但`url`键不可改变。
        该参数不能与`video-url`混用，否则可能会有意料之外的错误。
        
### 清晰度
- 配置项：`definition-list`
- 类型: Array < Object >
- 默认值：[]
- 参考数据结构：
```
[
  {
     name: '标清', // 渲染为清晰度切换播放栏选项
     url: ''
  }，
  {
     name: '高清',
     url: ''
  }，
  {
     name: '超清',
     url: ''
  }
]
```
- 描述：仅在通过`video-url`传入单个视频源时使用，切换`video-url`时，需要同时切换该选项，保持视频源与该视频源清晰度资源同步。
        多个视频源需要通过新增对象属性`definitionList`来使用。

### 直播
- 配置项：`live`
- 类型: Boolean
- 默认值：true
- 参考值：true | false
- 描述：开启直播，支持`hls`类型的视频流，如`m3u8`。关闭直播，支持`mp4`类型视频。

### 截屏
- 配置项：`screenShot`
- 类型: Boolean
- 默认值：true
- 参考值：true | false
- 描述：截屏功能。

### 封面图
- 配置项：`poster`
- 类型: String
- 默认值：''
- 描述：当播放器初始化后在用户点击播放按钮前显示的图像。
        多个视频源需要通过新增对象属性`poster`来使用。

### 下载
- 配置项：`download`
- 类型: Boolean
- 默认值：true
- 参考值：true | false
- 描述：下载功能。

### 画中画
- 配置项：`pip`
- 类型: Boolean
- 默认值：true
- 参考值：true | false
- 描述：视频缩小，脱离文档流，支持全屏拖拽。

## 事件
### 监听视频重复
- 配置项：`repeat-video`
- 返回类型：Object
- 返回值：重复的视频对象
- 描述：当传入重复视频时，该事件触发。仅针对多个数据源生效。

### 监听视频播放错误
- 配置项：`play-error`
- 返回类型：Object
- 返回值：出错的当前视频配置对象
- 描述：当视频播放出错时，该事件触发。该事件对于同一视频源只触发一次。

